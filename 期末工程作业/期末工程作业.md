---
title: 数据库系统期末工程作业设计
categories: 作业
tags: 数据库
---
### 期末工程作业



</p>, <p class="note note-info">本文暂只提供相关设计思路，不提供最终实现代码。实现方面前端flask或swing上手较为快速，也可尝试其他框架。后端使用mysql数据库，关于连接数据库方式网上很容易搜到，不再赘述。</p>, '\n\n\n\n#### 1. 需求描述\n\n疫情期间，学校的润美超市（虚构）需要对商品物资做更详细的管理。为防止供应链出现问题，对商品的供货商需要进行详细的记录，并对顾客的购买记录进行管理。当然，也需要对商品本身和超市内工作人员进行常规的管理。作为典型的数据库应用场景，引入合适的数据管理系统能够更好的落实疫情防控要求，并让超市具有更好的营业效果。\n\n1.商品根据名称和供应商整理，通过编号标识，记录其价格。同时对于食品还需记录其保质期，以免过期未处理。\n\n2.进货数据需要包含商品编号、进货价，进货时间等。\n\n3.超市内有若干工作人员，需要对其个人信息和销售商品所得薪水进行储存。\n\n4.需要对顾客信息进行储存。并对应购买时间和商品，形成销售日志。\n\n#### 2.1 概念模型ER图\n\n![image-20220919004148336](https://raw.githubusercontent.com/Lunaticsky-tql/my_picbed/main/%E6%9C%9F%E6%9C%AB%E5%B7%A5%E7%A8%8B%E4%BD%9C%E4%B8%9A/20220919004325018293_610_image-20220919004148336.png)\n\n#### 2.2 关系模式转换\n\n注：1.普通商品采用使用空值的方式，food与goods共用一张表\n\n\u200b\t\t2.斜体代表外键\n\ngoods（', <u>goods_id</u>, ', goods_name, supplier_id, price, good_num, *shelf_no*)\n\n//food（', <u>goods_id</u>, ', goods_name, supplier_id, price, shelf_life)\n\nsupplier（', <u>sp_id</u>, ', sp_name, phone, address)\n\nsupply（', <u>*sp_id*</u>, ', ', <u>*goods_id*</u>, ', enter_time, costs)\n\nemployee（', <u>emp_no</u>, ', ', <u>emp_name</u>, ', salary)\n\ncustomer（', <u>cu_id</u>, ', cu_name)\n\nbuy(', <u>*cu_id*</u>, ', ', <u>*goods_id*</u>, ', buy_time, buy_costs)\n\nshelf(', <u>shelf_id</u>, ', goods_num_on_shelf)\n\nsell (', <u>*emp_no*</u>, ', *', <u>goods_id</u>, '*)\n\n\n\n#### 2.3 SQL创建关系模式\n\n(((code0)))\n\n#### 2.4 查询语句样例\n\n1.单表查询\n\n查询单价为10元的商品名称\n\n(((code1)))\n\n2.多表连接查询\n\n查询每个厂商生产商品的平均价格\n\n(((code2)))\n\n\n\n3.4多表嵌套查询和exist查询\n\n查询只有一种商品的货架，返回这种商品的名称和货架id\n\n(((code3)))\n\n也可以只在goods表中查\n\n(((code4)))\n\n5.聚合查询\n\n有10种以上商品的货架，以及拥有的商品种类数\n\n(((code5)))\n\n\n\n#### 3.1 PowerDesigner 绘制ER图\n\n\n\n\n\n![image-20220415222750452](https://raw.githubusercontent.com/Lunaticsky-tql/my_picbed/main/%E6%9C%9F%E6%9C%AB%E5%B7%A5%E7%A8%8B%E4%BD%9C%E4%B8%9A/20220919004326633367_468_image-20220415222750452.png)\n\n#### 3.2 转为关系模型\n\n![image-20220415222820109](https://raw.githubusercontent.com/Lunaticsky-tql/my_picbed/main/%E6%9C%9F%E6%9C%AB%E5%B7%A5%E7%A8%8B%E4%BD%9C%E4%B8%9A/20220919004327928426_899_image-20220415222820109.png)\n\n#### 3.3 生成SQL语句\n\n(((code6)))\n\n\n\n#### 4.1 分析差异\n\n有差异。PowerDesigner会事先判断外键约束、索引以及表本身是否存在，若存在会删除。同时也会对表建立索引。但是基本逻辑是一致的，在总体的设计上不会造成影响。\n\n#### 4.2 语句特点\n\n从4.1的分析可以看出，PowerDesigner生成的语句更严谨。当然，语句顺序比如外键约束声明的位置也有不同。这些附加语句的作用是防止特殊情况的发生导致无法正常建